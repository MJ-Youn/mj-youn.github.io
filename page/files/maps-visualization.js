/*!
 * visualization - v1.0.3 - 2023-07-20 10:46:08
 *
 * Copyright(c) 2017, NAVER corp, Team mantle <dl_mantle@navercorp.com>
 *
 * geo-tree from https://github.com/salsita/geo-tree
 * Copyright (c) 2014 roman-kaspar
 * MIT license (https://github.com/salsita/geo-tree/blob/master/LICENSE)
 *
 * colormap from https://github.com/bpostlethwaite/colormap
 * Copyright (c) <2012> ICRL
 * MIT license (https://github.com/bpostlethwaite/colormap/blob/master/license.txt)
 */
!function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=6)}([function(e,t,r){var i=r(1),n=r(2);function a(){this.tree=new i}a.prototype.insert=function(e,t,r){var i,a,g;if("number"==typeof e)i=e,a=t,g=r;else{if("object"!=typeof e)return;if("number"==typeof e.length){for(var o=0;o<e.length;o++)this.insert(e[o]);return}i=e.lat,a=e.lng,g=e.data}t=Math.round(1e5*(i+90)),r=Math.round(1e5*(a+180)),r=n.xy2d(t,r),this.tree.insert(r,{idx:r,lat:i,lng:a,data:g})},a.prototype.find=function(e,t,r){var i,a,g=0===arguments.length;"number"==typeof(t=void 0===t?e:t)&&(i=(h=function(e,t,r){function i(e){return e*Math.PI/180}for(var n=6371009,a=[{units:"m",ratio:1},{units:"km",ratio:1e3},{units:"yd",ratio:.9144},{units:"mi",ratio:1609.34}],g=0;g<a.length&&a[g].units!==r;g++);if(a.length===g){var o=t*t;return{angle:t,validate:function(t){var r=e.lat-t.lat;return r*r+(t=e.lng-t.lng)*t<=o}}}var d=t*a[g].ratio;return{angle:d/(n*Math.cos(i(e.lat)))*180/Math.PI,validate:function(t){var r=i(e.lat-t.lat),a=i(e.lng-t.lng);r=Math.sin(r/2),a=Math.sin(a/2),a=r*r+Math.cos(i(e.lat))*Math.cos(i(t.lat))*a*a,a=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return n*a<=d}}}(e,t,r)).angle,a=h.validate);var o,d,s,l,x=-1/0,h=1/0;g||(l=void 0===i?(o=Math.min(e.lat,t.lat),d=Math.max(e.lat,t.lat),s=Math.min(e.lng,t.lng),Math.max(e.lng,t.lng)):(o=Math.max(e.lat-i,-90),d=Math.min(e.lat+i,90),s=Math.max(e.lng-i,-180),Math.min(e.lng+i,180)),x=n.xy2d(Math.round(1e5*(o+90)),Math.round(1e5*(s+180))),h=n.xy2d(Math.round(1e5*(d+90)),Math.round(1e5*(l+180))));var b,c,u,p,f=this.tree.find(x,h),m=[];if(g)for(b=0;b<f.length;b++)m.push(f[b].data);else if(void 0===i)for(b=0;b<f.length;b++)u=(c=f[b]).lat,p=c.lng,o<=u&&u<=d&&s<=p&&p<=l&&m.push(c.data);else for(b=0;b<f.length;b++)a(c=f[b])&&m.push(c.data);return m},a.prototype.forEach=function(e){e&&this.tree.forEach((function(t){e(t.data)}))},a.prototype.dump=function(e){return this.tree.dump(e)},e.exports=a},function(e,t){function r(e,t,r){this.parent=e,this.key=t,this.values=[r],this.left=null,this.right=null,this.color=0}function i(){this.root=null}r.prototype.getGrand=function(){return this.parent?this.parent.parent:null},r.prototype.getUncle=function(){var e=this.getGrand();return e?e.left===this.parent?e.right:e.left:null},r.prototype.dump=function(){return"[k:"+this.key+",c:"+(0===this.color?"R":"B")+",#:"+this.values.length+",l:"+(this.left?this.left.key:"NULL")+",r:"+(this.right?this.right.key:"NULL")+",p:"+(this.parent?this.parent.key:"NULL")+",v:"+JSON.stringify(this.values)+"]"},i.prototype.insert=function(e,t){if("number"==typeof e)this._insert(e,t);else if("object"==typeof e)if("number"==typeof e.length)for(var r,i=0;i<e.length;i++)r=e[i],this._insert(r.key,r.value);else this._insert(e.key,e.value)},i.prototype._insert=function(e,t){var i,n,a,g,o;if(this.root)for(n=this.root;;){if(n.key===e)return void n.values.push(t);if(e<n.key){if(!n.left){i=n.left=new r(n,e,t);break}n=n.left}else{if(!n.right){i=n.right=new r(n,e,t);break}n=n.right}}else i=this.root=new r(null,e,t);for(a=i.getGrand(),g=i.getUncle();;){if(!n){i.color=1;break}if(1===n.color)break;if(!g||0!==g.color){i===n.right&&n===a.left?((a.left=i).parent=a,(n.right=i.left)&&(i.left.parent=n),(i.left=n).parent=i,n=(i=n).parent):i===n.left&&n===a.right&&((a.right=i).parent=a,(n.left=i.right)&&(i.right.parent=n),(i.right=n).parent=i,n=(i=n).parent),n.color=1,a.color=0,i===n.left?((a.left=n.right)&&(n.right.parent=a),n.right=a):((a.right=n.left)&&(n.left.parent=a),n.left=a),(o=a.parent)?a===o.left?o.left=n:o.right=n:(this.root=n).color=1,n.parent=o,a.parent=n;break}n.color=g.color=1,a.color=0,n=(i=a).parent,a=i.getGrand(),g=i.getUncle()}},i.prototype.find=function(e,t){if(!this.root)return[];void 0===t&&(t=e);for(var r,i=[],n=[this.root];n.length;)(r=n.pop()).key>=e&&r.key<=t&&i.push(r.values),r.right&&r.key<t&&n.push(r.right),r.left&&r.key>e&&n.push(r.left);for(var a,g,o=[],d=0;d<i.length;d++)for(g=i[d],a=0;a<g.length;a++)o.push(g[a]);return o},i.prototype.forEach=function(e){e&&function t(r){if(r){t(r.left);for(var i=r.values,n=r.key,a=0;a<i.length;a++)e(i[a],n);t(r.right)}}(this.root)},i.prototype.dump=function(e){var t="";return e||console.log("--- dump start ---"),function r(i,n){i&&(e?t+=i.dump():console.log((void 0!==n?n+"+ ":"")+i.dump()),r(i.left,n=void 0===n?"":n+"  "),r(i.right,n))}(this.root),e||console.log("--- dump end ---"),t},e.exports=i},function(e,t){e.exports={xy2d:function(e,t){for(var r=1,i=Math.max(e,t),n=0;r<=i;)r<<=1;for(r>>=1;r;)n*=2,e&r&&(n+=1),n*=2,t&r&&(n+=1),r>>=1;return n}}},function(e,t,r){"use strict";var i=r(4),n=r(5);function a(e){return[e[0]/255,e[1]/255,e[2]/255,e[3]]}function g(e){for(var t,r="#",i=0;i<3;++i)r+=("00"+(t=(t=e[i]).toString(16))).substr(t.length);return r}function o(e){return"rgba("+e.join(",")+")"}e.exports=function(e){var t,r,d,s,l,x,h,b,c,u;if(b=((e=e||{}).nshades||72)-1,h=e.format||"hex",(x=e.colormap)||(x="jet"),"string"==typeof x){if(x=x.toLowerCase(),!i[x])throw Error(x+" not a supported colorscale");l=i[x]}else{if(!Array.isArray(x))throw Error("unsupported colormap option",x);l=x.slice()}if(l.length>1+b)throw new Error(x+" map requires nshades to be at least size "+l.length);c=Array.isArray(e.alpha)?2!==e.alpha.length?[1,1]:e.alpha.slice():"number"==typeof e.alpha?[e.alpha,e.alpha]:[1,1],t=l.map((function(e){return Math.round(e.index*b)})),c[0]=Math.min(Math.max(c[0],0),1),c[1]=Math.min(Math.max(c[1],0),1);var p=l.map((function(e,t){var r=l[t].index;return 4===(t=l[t].rgb.slice()).length&&0<=t[3]&&t[3]<=1||(t[3]=c[0]+(c[1]-c[0])*r),t})),f=[];for(u=0;u<t.length-1;++u){s=t[u+1]-t[u],r=p[u],d=p[u+1];for(var m=0;m<s;m++){var y=m/s;f.push([Math.round(n(r[0],d[0],y)),Math.round(n(r[1],d[1],y)),Math.round(n(r[2],d[2],y)),n(r[3],d[3],y)])}}return f.push(l[l.length-1].rgb.concat(c[1])),"hex"===h?f=f.map(g):"rgbaString"===h?f=f.map(o):"float"===h&&(f=f.map(a)),f}},function(e,t){e.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},function(e,t){e.exports=function(e,t,r){return e*(1-r)+t*r}},function(e,t,r){"use strict";r.r(t);const i={JET:"jet",HSV:"hsv",HOT:"hot",COOL:"cool",GREYS:"greys",YIGnBu:"YIGnBu",YIOrRd:"YIOrRd",RdBu:"RdBu",RAINBOW:"rainbow",PORTLAND:"portland",OXYGEN:"oxygen"};class n{constructor(e,t,r){this.weight=r||1,this.location=new naver.maps.LatLng(e,t)}setWeight(e){this.weight=e}getWeight(){return this.weight}setLocation(e){this.location=e}getLocation(){return this.location}lat(){return this.location.lat()}lng(){return this.location.lng()}clone(){return new n(this.location.lat(),this.location.lng(),this.weight)}toString(){return"(lat:"+this.location.lat()+",lng:"+this.location.lng()+",weight:"+this.weight+")"}}const a=r(0),g=r(3);class o{constructor(e){this.name=e,this.setColorMap(e)}getColorMapName(){return this.name}getSpectrum(){return this.spectrum}setColorMap(e,t){this.createColorMap(e),this.createSpectrum(t)}getColorMap(){return this.colormap}createColorMap(e){this.colormap=g({colormap:e||i.RAINBOW,nshades:256,format:"rgbaString"})}createSpectrum(e){let t=naver.maps.Util.DOM.createElement("canvas"),r=t.getContext("2d"),i=this.colormap.slice(0);e&&(i=i.reverse()),r.canvas.width=256,r.canvas.height=1;for(let e=0;e<256;e++)r.fillStyle=i[e],r.fillRect(e,0,10,1);this.spectrum=r.getImageData(0,0,256,1).data,r.clearRect(0,0,256,1),r=null,t=null}}class d extends naver.maps.__export().MapSystemProjection{constructor(e){super(e),this.bindTo(["__linearCenterPoint","size"],e)}unbindAll(){super.unbindAll()}fromPointToOffset(e){let t=e.clone();return t.sub(this._calcLinearProjectionTopLeft()),this.scaleUp(t,this.get("zoom")),t.sub(this.get("containerTopLeft")),t}fromOffsetToPoint(e){let t=e.clone();return t.add(this.get("containerTopLeft")),this.scaleDown(t,this.get("zoom")),t.add(this._calcLinearProjectionTopLeft()),this._interpolate(t)}_interpolate(e){let t=e.clone(),r=this.get("tileSize"),i=r.width;return r.height,t.x=Math.min(Math.max(t.x,0),i),t.y=Math.min(Math.max(t.y,0),i),t}_calcLinearProjectionTopLeft(){let e=this.get("__linearCenterPoint").clone(),t=this.get("size"),r=this.get("zoom"),i=this.scaleDown(t.width,r)/2,n=this.scaleDown(t.height,r)/2;return e.sub(i,n)}}class s extends naver.maps.__export().CanvasMapType{constructor(e){super(e)}getTileData(e,t,r){const i=this.getMapTypeOptions(),n=i.projectionMinZoom;let a,g=Math.pow(2,r-n);return this.repeatX&&(e%=g)<0&&(e+=g),!this.repeatX&&(e<0||g<=e)||t<0||g<=t?a=null:i.getTileData&&(a=i.getTileData(e,t,r)),a}}class l extends naver.maps.KVO{constructor(e,t,r){super(),e=naver.maps.Util.extend({},t||{},e),this.id="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}).toUpperCase(),this.name=r,this.gt=null,this.spectrum=new o(e.colorMap),this.setOptions(e),e.map&&this.setMap(e.map),this.DEFAULT_OPTIONS=t}setOptions(e,t){if("string"==typeof e){let r=t,i={};i[e]=r,this.setValues(i)}else naver.maps.Util.forEach(e,(e,t)=>{"map"!==t&&this.setOptions(t,e)})}getOptions(e){let t={};return void 0!==e?this.get(e):(naver.maps.Util.forEach(this.DEFAULT_OPTIONS||{},(e,r)=>{t[r]=this.get(r)}),t)}setMap(e){var t=this.getMap();e&&e.getMapModel()||(e=null),t&&(this.layer.setMap(null),this.vSystemProjection.unbindAll(),this.vSystemProjection=null),this.set("map",e),e&&(this.vSystemProjection=new d(e.getMapModel())),this.layer?this.layer.setMap(e):e&&this._initCanvasLayer(e)}getMap(){return this.get("map")||null}setData(e){this.gt&&(this.gt=null,this.maxWeight=null,this.minWeight=null),this.gt=new a,this._convertData(e),this.set("data",e)}getData(){return this.get("data")}setColorMap(e,t){this.spectrum.setColorMap(e,t),this.redraw()}getColorMap(){return this.spectrum.getColorMapName()}redraw(){this.layer&&this.layer.refresh()}opacity_changed(e){this.layer&&this.redraw()}_calcExtendedPixel(){throw Error("'_calcExtendedPixel' method is required.")}_visulaize(e,t,r){throw Error("'_visulaize' method is required.")}getImageData(e,t,r){if(this.getData()){let r=this._calcTileOffset(e,t),i=this._calcExtendedPixel(),n=this._calcExtendedBounds(r,i),a=this._getDataFromTree(n.getMin(),n.getMax()),g=null;return 0<a.length&&(g=this._visulaize(r.min,a,i)),g}}_getDataFromTree(e,t){return this.gt.find({lat:e.lat(),lng:e.lng()},{lat:t.lat(),lng:t.lng()})}_getTileSize(){let e=this.getMap().getMapModel();return e&&e.get("tileSize")||new naver.maps.Size(256,256)}_calcTileOffset(e,t){let r=this.getMap(),i=(this.vSystemProjection,r.getMapModel()),n=i.get("tileIndexArray"),a=n.get("startXIndex"),g=n.get("startYIndex"),o=n.get("startX_px"),d=n.get("startY_px"),s=i.get("tileSize"),l=s.width,x=s.height,h=(e-a)*l+o,b=(t-g)*x+d;return{min:new naver.maps.Point(h,b),max:new naver.maps.Point(h+l,b+x)}}_calcExtendedBounds(e,t){let r=this.vSystemProjection,i=e.min,n=e.max,a=t.x,g=t.y,o=i.clone().sub(a,g),d=n.clone().add(a,g);return naver.maps.LatLngBounds.bounds(r.fromOffsetToCoord(o),r.fromOffsetToCoord(d))}_calcLocationOffsetOnCanvas(e,t,r){let i=this.vSystemProjection.fromCoordToOffset(e);return{x:Math.floor(i.x-t.x+r.x),y:Math.floor(i.y-t.y+r.y)}}_createCtx(e){let t=this._getTileSize(),r=naver.maps.Util.DOM.createElement("canvas"),i=r.getContext("2d");return r.width=t.width+e.x,r.height=t.height+e.y,i.globalAlpha=this.get("opacity"),i}_initCanvasLayer(e){const t=e.getMapModel(),r=t.get("projection"),i=r&&r.name||"";let n=0;"UTMK"!==i&&"UTMK_NAVER"!==i||(n=-1);var a=new s({name:this.name,projectionMinZoom:n,tileSize:t.get("tileSize")||new naver.maps.Size(256,256),minZoom:t.get("userMinZoom"),maxZoom:t.get("userMaxZoom"),getTileData:this.getImageData.bind(this),repeatX:t.get("repeatX")});this.layer=new naver.maps.Layer(this.name,a,{overlayMap:this.getOptions("overlayMap")||!1}),this.layer.setMap(e)}_convertData(e){let t=this.maxWeight||-1/0,r=this.minWeight||1/0;for(var i of e){if(!(i instanceof n))if(i instanceof naver.maps.LatLng)i=new n(i.lat(),i.lng());else if(i.location){let e=i.location;if(e instanceof naver.maps.LatLng)i=new n(e.lat(),e.lng(),i.weight);else if(naver.maps.Util.isArray(e))i=new n(e[1],e[0],i.weight);else{if(!e.lat||!e.lng)throw Error("Wrong type 'location' in data array.");i=new n(e.lat,e.lng,i.weight)}}else naver.maps.Util.isArray(i)&&(i=new n(i[1],i[0]));var a=i.getWeight();t=Math.max(t,a),r=Math.min(r,a),this.gt.insert({lat:i.lat(),lng:i.lng(),data:i})}this.maxWeight=t,this.minWeight=r}}const x={map:null,data:null,opacity:.6,radius:10,colorMap:i.RAINBOW,overlayMap:!0},h={map:null,data:null,opacity:.5,radius:5,strokeWeight:1,strokeColor:"white",strokeLineCap:"butt",strokeLineJoin:"miter",fillColor:"red",overlayMap:!0};if(!window.naver||!window.naver.maps)throw new Error("NAVER Maps was not successfully loaded.");window.naver.maps.visualization={HeatMap:class extends l{constructor(e){super(e,x,"HeatMapLayer")}setColorMap(e,t){this.spectrum.setColorMap(e,t),this.redraw()}getColorMap(){return this.spectrum.getColorMapName()}radius_changed(){this.redraw()}_visulaize(e,t,r){let i=this._createCtx(r),n=this._getTileSize();for(var a of t){var g=this._calcLocationOffsetOnCanvas(a.getLocation(),e,r);this._drawTransparentDot(i,g.x,g.y,a.getWeight())}return t=i.getImageData(r.x,r.y,n.width,n.height),this._colorize(t),t}_calcExtendedPixel(){var e=2+this.get("radius")*Math.pow(2,this.minWeight)*2;return{x:e,y:e}}_calcWeightedFactor(e){return e=(e-this.minWeight)/(this.maxWeight-this.minWeight)*.9+.1,isNaN(e)?1:e}_drawTransparentDot(e,t,r,i){let n=this.get("radius"),a=2*n,g=this._calcWeightedFactor(i),o=e.createRadialGradient(t,r,1,t,r,n);o.addColorStop(0,"rgba(0, 0, 0,"+g+")"),o.addColorStop(1,"transparent"),e.fillStyle=o,e.fillRect(t-n,r-n,a,a)}_colorize(e){let t=this.spectrum.getSpectrum(),r=e.data;for(let e=0,n=r.length;e<n;e+=4){var i=4*r[e+3];0!=i&&(r[e]=t[i],r[e+1]=t[1+i],r[e+2]=t[2+i])}}},DotMap:class extends l{constructor(e){super(e,h,"DotMapLayer")}radius_changed(){this.redraw()}strokeWeight_changed(){this.redraw()}strokeColor_changed(){this.redraw()}strokeLineCap_changed(){this.redraw()}strokeLineJoin_changed(){this.redraw()}fillColor_changed(){this.redraw()}_visulaize(e,t,r){let i=this._createCtx(r),n=this._getTileSize();for(var a of t){var g=this._calcLocationOffsetOnCanvas(a.getLocation(),e,r);this._drawDot(i,g.x,g.y,a.getWeight())}return i.getImageData(r.x,r.y,n.width,n.height)}_calcExtendedPixel(){var e=this.get("radius")*Math.pow(2,this.minWeight)*2+2*this.get("strokeWeight");return{x:e,y:e}}_calcWeightedFactor(e){var t=(e-this.minWeight)/(this.maxWeight-this.minWeight);t=((e=this.get("radius"))-1)*t+1;return isNaN(t)?e:t}_drawDot(e,t,r,i){i=this._calcWeightedFactor(i),e.beginPath(),e.arc(t,r,i,0,2*Math.PI),e.closePath(),e.fillStyle=this.get("fillColor"),e.fill(),e.lineWidth=this.get("strokeWeight"),e.lineCap=this.get("strokeLineCap"),e.lineJoin=this.get("strokeLineJoin"),e.strokeStyle=this.get("strokeColor"),e.stroke(),e.setTransform(1,0,0,1,0,0)}},WeightedLocation:n,SpectrumStyle:i},window.naver.maps.Event.trigger(window.naver.maps,"__sbinit",window.naver.maps.visualization)}]);